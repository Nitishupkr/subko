{{ 'component-product-item.css' | asset_url | stylesheet_tag }}

<style>
.tab-heading {
    display: flex;
    justify-content: center;
    gap: {{ section.settings.tab_spacing }}px;
    margin-top: 20px; /* Adjust this value as needed for the top margin spacing */
}

.tab-heading div {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 10px; /* Additional padding for vertical line spacing */
}

.tab-heading div:not(:last-child)::after {
    content: '';
    position: absolute;
    right: calc(-{{ section.settings.tab_spacing }}px / 2); /* Adjusted for center alignment */
    top: 50%;
    transform: translateY(-50%);
    height: 100px; /* Full height */
    width: 1px; /* Line width */
    background-color: #B5B5B5; /* Line color */
}

.tab-heading img {
    height: auto;
    cursor: pointer;
}

.tab-indicator {
    display: flex;
    flex-wrap: wrap;
}

.hidden {
    display: none;
}

.active-tab img {
    opacity: 0.7; /* Example effect for active tab */
}

.hr {
    color: #ffffff;
}

/* Responsive Styles */
@media (max-width: 768px) {
    .tab-heading {
        overflow-x: auto;
        white-space: nowrap;
        flex-wrap: nowrap;
        gap: 10px;
    }

    .tab-heading div:not(:last-child)::after {
        display: none; /* Hide vertical lines on mobile */
    }

    .tab-heading img {
        width: 80px;
        flex: 0 0 auto;
    }

    .tab-heading {
        flex-direction: row;
    }
}
</style>

<div>
    <div class="tab-heading">
        {% for tab in section.settings.tabs %}
        <div>
            <h2>
                <a href="#" class="tab{{ forloop.index }}{% if forloop.first %} active-tab{% endif %}">
                    <img src="{{ tab.image | img_url: 'small' }}" alt="{{ tab.heading }}" style="width: {{ tab.image_width }}px;">
                </a>
            </h2>
        </div>
        {% endfor %}
    </div>

    {% for tab in section.settings.tabs %}
    <div class="page-width tab-indicator{% if forloop.first %} active-tab{% endif %}" id="collection{{ forloop.index }}">
        {% for product in tab.collection.products %}
        <div style="width: calc(100%/var(--product-column{{ forloop.index }})); padding: 10px;">
            <a href="{{ product.handle }}"><img src="{{ product.featured_image | img_url: 'medium' }}"></a>
            <a href="{{ product.handle }}">
                <h3>{{ product.title }}</h3>
            </a>
            <p>{{ product.price | money_with_currency }}</p>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        function setActiveTab(tabIndex) {
            const collections = document.querySelectorAll('.tab-indicator');
            collections.forEach((collection, index) => {
                collection.classList.toggle('hidden', index !== tabIndex);
            });

            const tabs = document.querySelectorAll('.tab-heading a');
            tabs.forEach((tab, index) => {
                tab.classList.toggle('active-tab', index === tabIndex);
            });
        }

        {% for tab in section.settings.tabs %}
        document.querySelector('.tab{{ forloop.index }}').addEventListener('click', function (e) {
            e.preventDefault();
            setActiveTab({{ forloop.index0 }});
        });
        {% endfor %}
    });
</script>

{% schema %}
{
    "name": "Tab Section",
    "settings": [
        {
            "type": "header",
            "content": "Tab 1 Settings"
        },
        {
            "type": "text",
            "id": "heading1",
            "label": "Heading One"
        },
        {
            "type": "image_picker",
            "id": "image1",
            "label": "Image for Heading One"
        },
        {
            "type": "range",
            "id": "image_width1",
            "label": "Image Width for Heading One",
            "min": 20,
            "max": 200,
            "step": 2,
            "default": 50
        },
        {
            "type": "collection",
            "id": "tab1-collection",
            "label": "Tab 1 Collection"
        },
        {
            "type": "range",
            "id": "product_show1",
            "min": 2,
            "max": 5,
            "step": 1,
            "label": "Products Per Row",
            "default": 4
        },
        {
            "type": "header",
            "content": "Tab 2 Settings"
        },
        {
            "type": "text",
            "id": "heading2",
            "label": "Heading Two"
        },
        {
            "type": "image_picker",
            "id": "image2",
            "label": "Image for Heading Two"
        },
        {
            "type": "range",
            "id": "image_width2",
            "label": "Image Width for Heading Two",
            "min": 20,
            "max": 200,
            "step": 2,
            "default": 50
        },
        {
            "type": "collection",
            "id": "tab2-collection",
            "label": "Tab 2 Collection"
        },
        {
            "type": "range",
            "id": "product_show2",
            "min": 2,
            "max": 5,
            "step": 1,
            "label": "Products Per Row",
            "default": 4
        },
        {
            "type": "header",
            "content": "Tab 3 Settings"
        },
        {
            "type": "text",
            "id": "heading3",
            "label": "Heading Three"
        },
        {
            "type": "image_picker",
            "id": "image3",
            "label": "Image for Heading Three"
        },
        {
            "type": "range",
            "id": "image_width3",
            "label": "Image Width for Heading Three",
            "min": 20,
            "max": 200,
            "step": 2,
            "default": 50
        },
        {
            "type": "collection",
            "id": "tab3-collection",
            "label": "Tab 3 Collection"
        },
        {
            "type": "range",
            "id": "product_show3",
            "min": 2,
            "max": 5,
            "step": 1,
            "label": "Products Per Row",
            "default": 4
        },
        {
            "type": "header",
            "content": "Tab 4 Settings"
        },
        {
            "type": "text",
            "id": "heading4",
            "label": "Heading Four"
        },
        {
            "type": "image_picker",
            "id": "image4",
            "label": "Image for Heading Four"
        },
        {
            "type": "range",
            "id": "image_width4",
            "label": "Image Width for Heading Four",
            "min": 20,
            "max": 200,
            "step": 2,
            "default": 50
        },
        {
            "type": "collection",
            "id": "tab4-collection",
            "label": "Tab 4 Collection"
        },
        {
            "type": "range",
            "id": "product_show4",
            "min": 2,
            "max": 5,
            "step": 1,
            "label": "Products Per Row",
            "default": 4
        },
        {
            "type": "header",
            "content": "General Settings"
        },
        {
            "type": "range",
            "id": "tab_spacing",
            "label": "Tab Spacing",
            "min": 5,
            "max": 50,
            "step": 1,
            "default": 20
        }
    ],
    "presets": [
        {
            "name": "Tab Section",
            "category": "Product"
        }
    ]
}

{% endschema %}
